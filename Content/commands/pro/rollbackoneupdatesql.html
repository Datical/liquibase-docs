<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>rollbackOneUpdateSQL command | Liquibase Docs</title>
        <meta rel="canonical" href="https://docs.liquibase.com/commands/pro/rollbackoneupdatesql.html" />
        <link href="../../Z_Resources/Stylesheets/TableStyles.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="Reference information and use cases for the rollbackOneUpdateSQL command. The rollbackOneUpdateSQL command is a helper command that allows you to inspect the SQL Liquibase will run to revert all changesets associated with the deploymentID specified in the rollbackOneUpdate command. It is only available for Liquibase Pro users." />
    </head>
    <body>
        <h1 id="liquibase-commands-rollbackoneupdatesql"><code class="highlighter-rouge">rollbackOneUpdateSQL</code> command</h1>
        <div align="center"><iframe width="560" height="315" src="https://www.youtube.com/embed/P3SL1XnCB7s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
        </div>
        <p>The <code class="highlighter-rouge">rollbackOneUpdateSQL</code> command is a helper command that allows you to inspect the SQL <MadCap:variable name="General.Liquibase" /> will run to revert all <em><MadCap:variable name="General.changeset" /></em> associated with the <code class="highlighter-rouge">deploymentID</code> specified in the <MadCap:xref href="rollbackoneupdate.html">rollbackOneUpdate command</MadCap:xref>. It is only available for <MadCap:variable name="General.LBPro" /> users.</p>
        <h2 id="uses">Uses</h2>
        <p>The <code class="highlighter-rouge">rollbackOneUpdateSQL</code> command is typically used when you want inspect the raw SQL that <MadCap:variable name="General.Liquibase" /> uses to revert all <em><MadCap:variable name="General.changeset" />s</em> associated with a specified <code class="highlighter-rouge">deploymentId</code> when you run the <code class="highlighter-rouge">rollbackOneUpdate</code> command, so you don't unintentionally make a mistake.</p>
        <h2 id="running-the-rollbackoneupdatesql-command">Running the <code class="highlighter-rouge">rollbackOneUpdateSQL</code> command</h2>
        <p>Before running the <code>rollbackOneUpdateSQL</code> command, you can get the optional <code>deploymentId</code> by running the <MadCap:xref href="../community/history.html">history command</MadCap:xref>:</p>
        <ul>
            <li>The <code class="highlighter-rouge">deploymentId</code> of the <em><MadCap:variable name="General.changeset" /></em> group you want to revert</li>
        </ul>
        <p>Then run the <code class="highlighter-rouge">rollbackOneUpdateSQL</code> command, with your information:</p>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-text" data-lang="text">liquibase rollbackOneUpdateSQL --deploymentId=2068379006</code>
            </pre>
        </figure>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
		Unlike the <MadCap:xref href="rollbackoneupdate.html">rollbackOneUpdate command</MadCap:xref>, there is NO impact to the <MadCap:variable name="General.databasechangelog" /> table.</p>
        <p>For more command specific help, type <code class="highlighter-rouge">liquibase rollbackOneUpdateSQL --help</code> into the command prompt.</p>
        <h2><code class="highlighter-rouge">rollbackOneUpdateSQL</code> global <MadCap:variable name="General.Param/Attribute" />s</h2>
        <table style="margin-left: auto;margin-right: auto;width: 100%;mc-table-style: url('../../Z_Resources/Stylesheets/TableStyles.css');" class="TableStyle-TableStyles" cellspacing="0">
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <thead>
                <tr class="TableStyle-TableStyles-Head-Header1">
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Parameter</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Definition</th>
                    <th class="TableStyle-TableStyles-HeadD-Column1-Header1">Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-TableStyles-Body-Body1">
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body1"><code>--changeLogFile</code> *</td>
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body1">Specifies the root <em><MadCap:variable name="General.changelog" /></em>.</td>
                    <td class="TableStyle-TableStyles-BodyD-Column1-Body1">Required</td>
                </tr>
                <tr class="TableStyle-TableStyles-Body-Body2">
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body2"><code>--url</code>
                    </td>
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body2">Specifies the JDBC database connection URL.</td>
                    <td class="TableStyle-TableStyles-BodyD-Column1-Body2">Required</td>
                </tr>
                <tr class="TableStyle-TableStyles-Body-Body1">
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body1"><code>--username</code>
                    </td>
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body1">Specifies the database username.</td>
                    <td class="TableStyle-TableStyles-BodyD-Column1-Body1">Required</td>
                </tr>
                <tr class="TableStyle-TableStyles-Body-Body2">
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body2"><code>--password</code>
                    </td>
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body2">Specifies the database password.</td>
                    <td class="TableStyle-TableStyles-BodyD-Column1-Body2">Required</td>
                </tr>
                <tr class="TableStyle-TableStyles-Body-Body1">
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body1"><code>--liquibaseProLicenseKey</code>
                    </td>
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body1">Your <MadCap:variable name="General.LBPro" /> license key.</td>
                    <td class="TableStyle-TableStyles-BodyD-Column1-Body1">Required</td>
                </tr>
                <tr class="TableStyle-TableStyles-Body-Body2">
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body2"><code>--outputFile **</code>
                    </td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body2">Specifies the file path to where the rollback SQL will be written.</td>
                    <td class="TableStyle-TableStyles-BodyA-Column1-Body2">Optional</td>
                </tr>
            </tbody>
        </table>
        <blockquote>
            <p>* <MadCap:variable name="General.Liquibase" /> checks the <em><MadCap:variable name="General.changelog" /></em> and any nested <em><MadCap:variable name="General.changelog" />s</em> for the definitions of the <em><MadCap:variable name="General.changeset" /></em> to roll back.</p>
        </blockquote>
        <blockquote>
            <p>** If not specified, rollback SQL output goes to <code class="highlighter-rouge">STDOUT</code>.</p>
            <MadCap:snippetBlock src="../../Z_Resources/Snippets/commands/Note-about-username-and-password.flsnp" />
        </blockquote>
        <h2><code class="highlighter-rouge">rollbackOneUpdateSQL</code> command <MadCap:variable name="General.Param/Attribute" />s</h2>
        <table style="mc-table-style: url('../../Z_Resources/Stylesheets/TableStyles.css');margin-left: auto;margin-right: auto;width: 100%;" class="TableStyle-TableStyles" cellspacing="0">
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <thead>
                <tr class="TableStyle-TableStyles-Head-Header1">
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Parameter</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Definition</th>
                    <th class="TableStyle-TableStyles-HeadD-Column1-Header1">Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-TableStyles-Body-Body1">
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1"><code>--deploymentId</code> *</td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">Specifies the <code class="highlighter-rouge">deploymentId</code> in the <MadCap:variable name="General.databasechangelog" /> table for all <em><MadCap:variable name="General.changeset" /></em> you want to rollback.</td>
                    <td class="TableStyle-TableStyles-BodyA-Column1-Body1">Required</td>
                </tr>
            </tbody>
        </table>
        <blockquote>
            <p>* If the <code class="highlighter-rouge">deploymentId</code> is not specified, <MadCap:variable name="General.LBPro" /> will use the most recently deployed <code class="highlighter-rouge">deploymentId</code> from the <MadCap:variable name="General.databasechangelog" /> table and use it to generate the rollback SQL.</p>
        </blockquote>
        <h2 id="output">Output</h2>
        <p>When successful, the <code class="highlighter-rouge">rollbackOneUpdateSQL</code> command produces the following output:</p>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-sql" data-lang="sql"><span class="c1">-- *********************************************************************</span>  
<span class="c1">-- Rollback deployment ID '2068379006'</span>  
<span class="c1">-- *********************************************************************</span>  
<span class="c1">-- Change Log: sql.oracle.sql</span>  
<span class="c1">-- Ran at: 2/18/20 5:27 PM</span>  
<span class="c1">-- Against: PROSCHEMA@jdbc:oracle:thin:@3.219.82.47:1521/orcl</span>  
<span class="c1">-- Liquibase version: 3.8.7</span>  
<span class="c1">-- *********************************************************************</span>  

<span class="c1">-- Lock Database</span>  
<span class="k">UPDATE</span>  <span class="n">PROSCHEMA</span><span class="p">.</span><span class="n">DATABASECHANGELOGLOCK</span>  <span class="k">SET</span>  <span class="n">LOCKED</span>  <span class="o">=</span>  <span class="mi">1</span><span class="p">,</span>  <span class="n">LOCKEDBY</span>  <span class="o">=</span>  <span class="s1">'gemfire-PC (10.8.8.200)'</span><span class="p">,</span>  <span class="n">LOCKGRANTED</span>  <span class="o">=</span>  <span class="n">TO_TIMESTAMP</span><span class="p">(</span><span class="s1">'2020-02-18 17:27:20.364'</span><span class="p">,</span>  <span class="s1">'YY
YY-MM-DD HH24:MI:SS.FF'</span><span class="p">)</span>  <span class="k">WHERE</span>  <span class="n">ID</span>  <span class="o">=</span>  <span class="mi">1</span>  <span class="k">AND</span>  <span class="n">LOCKED</span>  <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span>  

<span class="c1">-- Rolling Back ChangeSet: sql.oracle.sql::2-createPackageBody::Liquibase Pro User</span>  
<span class="k">DROP</span>  <span class="n">PACKAGE</span>  <span class="n">BODY</span>  <span class="n">PROSCHEMA</span><span class="p">.</span><span class="n">PKG1</span><span class="p">;</span>  

<span class="k">DELETE</span>  <span class="k">FROM</span>  <span class="n">PROSCHEMA</span><span class="p">.</span><span class="n">DATABASECHANGELOG</span>  <span class="k">WHERE</span>  <span class="n">ID</span>  <span class="o">=</span>  <span class="s1">'2-createPackageBody'</span>  <span class="k">AND</span>  <span class="n">AUTHOR</span>  <span class="o">=</span>  <span class="s1">'Liquibase Pro User'</span>  <span class="k">AND</span>  <span class="n">FILENAME</span>  <span class="o">=</span>  <span class="s1">'sql.oracle.sql'</span><span class="p">;</span>  

<span class="c1">-- Rolling Back ChangeSet: sql.oracle.sql::1-createPackage::Liquibase Pro User</span>  
<span class="k">DROP</span>  <span class="n">PACKAGE</span>  <span class="n">PROSCHEMA</span><span class="p">.</span><span class="n">PKG1</span><span class="p">;</span>  

<span class="k">DELETE</span>  <span class="k">FROM</span>  <span class="n">PROSCHEMA</span><span class="p">.</span><span class="n">DATABASECHANGELOG</span>  <span class="k">WHERE</span>  <span class="n">ID</span>  <span class="o">=</span>  <span class="s1">'1-createPackage'</span>  <span class="k">AND</span>  <span class="n">AUTHOR</span>  <span class="o">=</span>  <span class="s1">'Liquibase Pro User'</span>  <span class="k">AND</span>  <span class="n">FILENAME</span>  <span class="o">=</span>  <span class="s1">'sql.oracle.sql'</span><span class="p">;</span></code>
            </pre>
        </figure>
        <p>&#160;</p>
        <h2 style="text-align: center;"><a target="_blank" href="https://www.liquibase.com/trial">Like what you read? Try this command in Pro for Free.</a>
        </h2>
        <p style="text-align: center;">&#160;</p>
    </body>
</html>